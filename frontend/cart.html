<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - EcoFinds</title>
    <link rel="stylesheet" href="cart.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="logo">EcoFinds</div>
        <a href="home.html" class="back-btn">‚Üê Back to Home</a>
    </header>

    <!-- Cart Section -->
    <main>
        <h2>üõí Your Cart</h2>
        <div id="cart-items"></div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 EcoFinds. Empowering Sustainable Consumption.</p>
    </footer>

    <!-- Script -->
    <script>
        const cartContainer = document.getElementById('cart-items');

        function renderCart() {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cartContainer.innerHTML = '';

            if (cart.length === 0) {
                cartContainer.innerHTML = '<p>Your cart is empty.</p>';
                return;
            }

            cart.forEach((item, index) => {
                const div = document.createElement('div');
                div.classList.add('cart-card');

                div.innerHTML = `
                    <div class="cart-left">
                        <img src="${item.image}" alt="${item.title}">
                        <div class="cart-info">
                            <h3>${item.title}</h3>
                            <p class="desc">${item.description}</p>
                        </div>
                    </div>
                    <div class="cart-right">
                        <span class="price">‚Çπ${item.price}</span>
                        <p>Quantity: <strong>${item.quantity}</strong></p>
                        <div class="cart-actions">
                            <button class="decrease-btn" data-index="${index}">‚ûñ</button>
                            <button class="increase-btn" data-index="${index}">‚ûï</button>
                            <button class="remove-btn" data-index="${index}">üóë Remove</button>
                        </div>
                        <button class="place-order-btn" data-index="${index}">PLACE ORDER</button>
                    </div>
                `;
                cartContainer.appendChild(div);
            });

            // Quantity and Remove buttons
            document.querySelectorAll('.increase-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const i = e.target.dataset.index;
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    cart[i].quantity++;
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                });
            });

            document.querySelectorAll('.decrease-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const i = e.target.dataset.index;
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    if (cart[i].quantity > 1) {
                        cart[i].quantity--;
                    }
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                });
            });

            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const i = e.target.dataset.index;
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    cart.splice(i, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                });
            });

            // Place Order button per item
            document.querySelectorAll('.place-order-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    if (cart.length === 0) {
                        alert("Your cart is empty!");
                        return;
                    }

                    localStorage.removeItem('cart');
                    renderCart();
                    alert("Order placed successfully! Thank you for shopping with EcoFinds üå±");
                });
            });
        }

        renderCart();
    </script>
</body>

</html>